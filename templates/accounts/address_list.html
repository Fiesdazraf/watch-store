{% extends "base.html" %}
{% block title %}آدرس‌های من | Watch-Store{% endblock %}

{% block content %}
<section class="section pt-5">
  <div class="container">

    <div class="is-flex is-justify-content-space-between is-align-items-center mb-5">
      <h1 class="title is-4 mb-0">آدرس‌های من</h1>
      <a href="{% url 'accounts:address_create' %}" class="button is-primary is-medium" style="background-color:#c9a227;">
        <span class="icon"><i class="fas fa-plus"></i></span>
        <span>افزودن آدرس جدید</span>
      </a>
    </div>

    {% if addresses %}
      <div class="columns is-multiline">
        {% for addr in addresses %}
          <div class="column is-12-tablet is-6-desktop">
            <div class="box"
                 style="{% if addr.is_default %}border:2px solid #c9a227;{% endif %} box-shadow:0 0 15px rgba(0,0,0,0.05); border-radius:10px;">

              <div class="is-flex is-justify-content-space-between is-align-items-center mb-3">
                <p class="is-size-6 has-text-weight-semibold">
                  <span class="icon mr-1"><i class="fas fa-map-marker-alt"></i></span>
                  {{ addr.full_name|default:"آدرس" }}
                </p>
                {% if addr.is_default %}
                  <span class="tag is-success is-light">پیش‌فرض</span>
                {% endif %}
              </div>

              <div class="content is-size-6 has-text-grey-dark">
                {% if addr.line1 %}<p dir="ltr">{{ addr.line1 }}</p>{% endif %}
                {% if addr.line2 %}<p dir="ltr">{{ addr.line2 }}</p>{% endif %}

                {% if addr.city or addr.province %}
                  <p>{{ addr.city }}{% if addr.city and addr.province %}، {% endif %}{{ addr.province }}</p>
                {% endif %}

                {% if addr.postal_code or addr.country %}
                  <p>
                    {% if addr.postal_code %}
                      <span dir="ltr">کدپستی: {{ addr.postal_code }}</span>
                    {% endif %}
                    {% if addr.country %}
                      {% if addr.postal_code %} — {% endif %}
                      <span>{{ addr.country }}</span>
                    {% endif %}
                  </p>
                {% endif %}

                {% if addr.phone_number %}
                  <p>تلفن: <span dir="ltr">{{ addr.phone_number }}</span></p>
                {% endif %}
              </div>

              <div class="buttons mt-4">
                <a href="{% url 'accounts:address_update' addr.id %}" class="button is-link is-light">
                  <span class="icon"><i class="fas fa-edit"></i></span>
                  <span>ویرایش</span>
                </a>
                <a href="{% url 'accounts:address_delete' addr.id %}" class="button is-danger is-light">
                  <span class="icon"><i class="fas fa-trash-alt"></i></span>
                  <span>حذف</span>
                </a>
              </div>

            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <article class="message is-info is-light">
        <div class="message-body has-text-centered">
          <p>هنوز آدرسی ثبت نکرده‌اید.</p>
          <a href="{% url 'accounts:address_create' %}" class="button is-small is-link mt-3">
            <span class="icon"><i class="fas fa-plus"></i></span>
            <span>افزودن آدرس</span>
          </a>
        </div>
      </article>
    {% endif %}

  </div>
</section>
{% endblock %}
